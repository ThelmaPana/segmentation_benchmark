
# segmentation_benchmark

Code for: **Content-aware segmentation of objects spanning a large size range: application to plankton images**

Thelma Panaïotis
PhD student
Laboratoire d’Océanographie de Villefranche (UMR 7093)

***

Benchmark for three segmentation pipelines on ISIIS data:
- threshold-based pipeline: adaptive gray threshold
- T-CNN pipeline: CNN-based bbox proposal for small objects + thresholding 
- T-MSER pipeline: maximally stable extremal regions

## Structure

`data` contains all data for segmentation benchmark:
- `manual`: ground truth data
    - `stacks`: manual stacks
    - `segmented`: manual particles for Ecotaxa import from manual stacks
    - `particles`: manual segments generated from manual stacks
- `regular_apeep`: `apeep` output for threshold-based pipeline 
    - `segmented`: segmented images from `apeep` threshold-based pipeline 
    - `particles`: particles from `apeep` threshold-based pipeline 
- `semantic_apeep`: `Apeep` output for T-CNN pipeline 
    - `segmented`: segmented images from `apeep` T-CNN pipeline 
    - `particles`: particles from `apeep` T-CNN pipeline 
- `mser`: output for T-MSER pipeline   
    - `mser_measurements.csv`: properties of T-MSER particles
    - `mser_matches.csv`: matches of T-MSER particles with ground truth particles
- `raw_frames`: raw frames from avi files (generated by `00.get_raw_frames.py`)
- `matches_bbox`: particle matches (generated by `03.match_particles.py`)

`lib` contains needed scripts.

## Scripts
- `00.get_raw_frames.py`: extract raw frames from avi files for benchmark images
- `01.process_manual_stacks.py`: process manual stacks by extracting and measuring particles for Ecotaxa import, and generate segmented images
- `02.extract_manual_ecotaxa.R`: extract manual particles with taxonomy from Ecotaxa, locate them in avi files
- `03.match_particles.py`: match manual particles with those from `apeep` threshold-based and T-CNN
- `04.matches_stats.Rmd`: compute global precision and recall, precision and recall per size class and recall per taxonomic group for all three segmentation pipelines

## Results
A benchmark report containing computed statistics is generated: `04.matches_stats.html`
